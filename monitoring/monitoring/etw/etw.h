#pragma once
#define INITGUID  // Include this #define to use SystemTraceControlGuid in Evntrace.h.

#include <windows.h>
#include <stdio.h>
#include <conio.h>
#include <strsafe.h>
#include <wmistr.h>
#include <evntrace.h>
#include <iostream>

#define LOGFILE_PATH LR"(etw.etl)"

class ETW {
	ULONG status = ERROR_SUCCESS;
	TRACEHANDLE SessionHandle = 0;
	EVENT_TRACE_PROPERTIES* pSessionProperties = NULL;
	ULONG LOG_FILE_SIZE = 512;
	ULONG BufferSize = 0;
	bool start_success = false;
public:
	void start();
	void stop();
};
