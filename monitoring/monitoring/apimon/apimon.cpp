#include "apimon.h"

Apimon::Apimon(string file) {
	pml_file = file + ".pml";
	xml_file = file + ".xml";
}
void Apimon::start() {
	string cmd = "procmon /AcceptEula	/Quiet /Minimized /BackingFile " + pml_file;
	system(cmd.c_str());
}
void Apimon::stop() {
	system("procmon /Terminate");
	string cmd = "procmon /OpenLog " + pml_file +  " /SaveAs " + xml_file + " /SaveApplyFilter";
	system(cmd.c_str());
}
